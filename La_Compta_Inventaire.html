<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classification des Rubriques d'Inventaire</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            background-color: #000000;
            color: #333;
        }
        header {
            text-align: center;
            margin: 2px auto 20px;
			padding: 8px;
			background-color: #4F0082;
            color: white;
            border-radius: 10px;
			position: relative;
			max-width: 1200px;
            border-top: 6px solid #FF1100;
            border-bottom: 6px solid #2DFF00;			
			text-shadow: 2px 2px 4px rgba(0,0,0,1);
            box-shadow: 0 -4px 12px 4px rgba(255, 161, 153, 0.6);
        }
        h1 {
            margin: 0;
            font-size: 1.6rem;
        }
        h2 {
            margin: 8px 0 0;
            font-weight: 400;
            font-size: 1rem;
            color: #ecf0f1;
        }
        h3 {
            margin: 0;
            font-size: 1.1rem;		
        }		
        .container {
            margin: 0px auto 10px;
			max-width: 1000px;
	      }
        .rubriques-container {
            width: 100%;
            background-color: #fff;
            padding: 12px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
		.association {
			display: flex;
			align-items: center;
			margin-bottom: 0; /* Supprime l'espace entre les lignes */
			padding: 2px; /* Réduit le padding pour rétrécir les cadres */
			background-color: #FFE0F9; /* Rose clair */
			border-radius: 4px;
		}
		.rubriques-list {
			min-height: 350px;
			display: flex;
			flex-direction: column;
			gap: 8px; /* Réduit l'espace entre les lignes à 1px */
		}
        .rubrique-number {
            width: 25px;
            text-align: center;
            font-weight: bold;
            margin-right: 8px;
            color: #2c3e50;
            font-size: 0.9rem;
        }
        .association-rubrique {
            flex: 2;
            padding: 6px;
			font-weight: bold;
            color: black;
            border-radius: 4px;
            margin-right: 8px;
            font-size: 1rem;
        }
        .association-compte {
            flex: 1;
            padding: 6px;
            background-color: #3498db;
            color: white;
            border-radius: 4px;
            text-align: left;
            cursor: pointer;
            border: none;
            font-size: 0.9rem;
            min-width: 0;
        }
        .correct {
            background-color: #27ae60 !important;
        }
        .incorrect {
            background-color: #e74c3c !important;
        }
        .correction-container {
            flex: 1.2;
            display: flex;
            align-items: left;
            margin-left: 8px;
        }
        .validation-icon {
            margin-right: 8px;
            font-weight: bold;
            font-size: 1.1rem;
            width: 20px;
            text-align: center;
        }
        .correct-icon {
            color: #27ae60;
        }
        .incorrect-icon {
            color: #e74c3c;
        }
        .correct-answer {
            flex: 1;
            padding: 6px;
            background-color: #f8f9fa;
            color: #2c3e50;
            border-radius: 4px;
            text-align: center;
            font-size: 0.9rem;
            border: 1px solid #ddd;
            min-height: 20px;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 20px 0;
        }
        button {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s;
			text-shadow: 1px 1px 2px rgba(0,0,0,1);
            box-shadow: 0 2px 4px rgba(0,0,0,0.15);
        }
        #submit-btn {
            background-color: ##00b50d;
            color: white;
        }
        #submit-btn:hover:not(:disabled) {
            background-color: #61b865;
            transform: translateY(-2px);
            box-shadow: 0px 0px 10px 5px rgba(0,255,0, 0.6);
        }
        #submit-btn:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }
        #reset-btn {
            background-color: #ffa500;
            color: white;
        }
        #reset-btn:hover {
            background-color: #ffbf47;
            transform: translateY(-2px);
            box-shadow: 0px 0px 10px 5px rgba(255,255,75, 0.6);			
        }
        #solution-btn {
            background-color: #0088c2;
            color: white;
        }
        #solution-btn:hover {
            background-color: #5eabcc;
            transform: translateY(-2px);
            box-shadow: 0px 0px 10px 5px rgba(120,255,255, 0.6);
        }
        #quitter-btn {
            background-color: #ff0000;
            color: white;
        }
        #quitter-btn:hover {
            background-color: #ff4747;
            transform: translateY(-2px);
            box-shadow: 0px 0px 10px 5px rgba(255,55,55, 0.6);
        }
        .result-container {
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 6px;
            display: none;
        }
        .result-text {
            font-weight: bold;
            font-size: 1.1rem;
            margin: 0;
        }
        footer {
            text-align: center;
            margin-top: 10px;
            padding: 2px;
            color: #FFB0FF;
            border-radius: 8px;
            font-style: italic;
            font-size: 0.9rem;
        }
		.info-icon {
			position: absolute;
			top: 15px;
			right: 15px;
			background-color: #51FF46;
			color: black;
			border-radius: 50%;
			width: 24px;
			height: 24px;
			text-align: center;
			line-height: 24px;
			font-weight: bold;
			cursor: pointer;
			font-size: 16px;
			font-style: italic;
			font-family: serif;
			box-shadow: 0px 0px 5px rgba(0,0,0,0.5);
			transition: all 0.3s ease;
		}

		.info-icon:hover {
			background-color: #FDCF00;
			transform: scale(1.1);
		}
		
		.info-icon:hover::after {
			content: "Rappel de la théorie";
			position: absolute;
			top: -30px;
			right: 0;
			background: #333;
			color: white;
			padding: 5px 10px;
			border-radius: 4px;
			font-size: 12px;
			white-space: nowrap;
			font-style: normal;
			font-family: Arial, sans-serif;
		}

		.modal {
			display: none;
			position: fixed;
			z-index: 1000;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0,0,0,0.7);
		}

		.modal-content {
			background-color: #3c3c54;
			margin: 5% auto;
			padding: 25px;
			border-radius: 10px;
			width: 80%;
			max-width: 600px;
			border: 3px solid #51FF46;
			box-shadow: 0px 0px 20px rgba(81, 255, 70, 0.5);
			position: relative;
		}

		.close {
			color: #ff4747;
			float: right;
			font-size: 28px;
			font-weight: bold;
			cursor: pointer;
			line-height: 1;
		}

		.close:hover {
			color: #ff0000;
			text-shadow: 0px 0px 10px rgba(255, 0, 0, 0.7);
		}
		
		.theory-title {
			color: #51FF46;
			font-size: 1.4rem;
			border-bottom: 2px solid #FDCF00;
			padding-bottom: 10px;
			margin-top: 0;
		}

		.theory-content {
			line-height: 1.6;
			margin-top: 15px;
			color: white;
		}		
    </style>
</head>
<body>
    <header>
        <h1>CLASSIFICATION DES RUBRIQUES D'INVENTAIRE</h1>
        <h2>Associez chaque rubrique d'inventaire au compte approprié</h2>
		<div class="info-icon" onclick="showTheory()">i</div>
    </header>

    <div class="container">
        <div class="rubriques-container">
            <h3>Rubriques d'inventaire à classer</h3>
            <div class="counter" id="counter">20 rubriques restantes</div>
            <div class="rubriques-list" id="rubriques-list">
                <!-- Les rubriques et leurs listes déroulantes seront générées par JavaScript -->
            </div>
        </div>
    </div>

    <div class="result-container" id="result-container">
        <p class="result-text" id="result-text"></p>
    </div>

    <div class="controls">
        <button id="submit-btn" disabled>Valider</button>
        <button id="reset-btn">Nouvel exercice</button>
        <button id="solution-btn">Afficher la solution</button>
        <button id="quitter-btn">Quitter</button>
    </div>

    <footer>
        <p>"Je fais de la compta et c'est ma joie", DG, EPC Fribourg</p>
    </footer>

		<!-- Pop-up théorique -->
		<div id="theoryModal" class="modal">
			<div class="modal-content">
				<span class="close" onclick="closeTheory()">&times;</span>
				<h2 class="theory-title">Rappels théoriques</h2>
				<div class="theory-content">
					<p>Un solde débiteur = on a une dette, c'est donc un <strong>passif</strong></p>
					<p>Un solde créancer = on a un avoir, c'est donc un <strong>actif</strong></p>
					<p>Certains éléments de l'inventaire ne vont pas dans le bilan!</p>
					<p>On peut regrouper le matériel informatique et les logiciels dans un seul compte <strong>Informatique</strong></p>
				</div>
			</div>
		</div>	

    <script>
		document.addEventListener('keydown', function(e) {
			if (e.keyCode == 123 || // F12
				(e.ctrlKey && e.shiftKey && e.keyCode == 73) || // Ctrl+Shift+I
				(e.ctrlKey && e.keyCode == 85)) { // Ctrl+U
				e.preventDefault();
			}
		});
		
        document.addEventListener('DOMContentLoaded', function() {
            // Définition des comptes disponibles
            const comptes = [
                { id: 'caisse', nom: 'Caisse' },
				{ id: 'banquea', nom: 'Banque (Solde en notre faveur)' },
                { id: 'poste', nom: 'Poste' },
                { id: 'creances-clients', nom: 'Créances clients' },
                { id: 'titres', nom: 'Titres' },
                { id: 'stock-marchandises', nom: 'Stock de marchandises' },
                { id: 'machine', nom: 'Machines' },
                { id: 'mobilier', nom: 'Mobilier et installation' },
                { id: 'informatique', nom: 'Matériel informatique' },
                { id: 'logiciel', nom: 'Logiciels' },
                { id: 'vehicules', nom: 'Véhicules' },
                { id: 'instruments-outillage', nom: 'Instruments et outillage' },
                { id: 'immeuble', nom: 'Immeuble' },
                { id: 'dettes-fournisseurs', nom: 'Dettes fournisseurs' },
                { id: 'autres-dettes', nom: 'Autres dettes' },
                { id: 'banque', nom: 'Banque (Solde débiteur)' },
                { id: 'dette-bancaire', nom: 'Crédit d\'investissement' },
                { id: 'dette-hypothecaire', nom: 'Dette hypothécaire' },
                { id: 'capital', nom: 'Capital' },
                { id: 'hors', nom: 'Pas dans le bilan' }
            ];

            // Définition des rubriques d'inventaire et de leur compte correct
            const rubriques = [
                { id: 'rubrique1', nom: 'Factures de nos fournisseurs impayées', compteCorrect: 'dettes-fournisseurs' },
                { id: 'rubrique2', nom: 'Logiciels', compteCorrect: 'logiciel' },
                { id: 'rubrique3', nom: 'Montant total des espèces', compteCorrect: 'caisse' },
                { id: 'rubrique4', nom: 'Remorques', compteCorrect: 'vehicules' },
                { id: 'rubrique5', nom: 'Ordinateurs portables', compteCorrect: 'informatique' },
                { id: 'rubrique6', nom: 'Bureau et chaises', compteCorrect: 'mobilier' },
                { id: 'rubrique7', nom: 'Factures envoyées à nos clients et encore impayées', compteCorrect: 'creances-clients' },
                { id: 'rubrique8', nom: 'Bâtiment de l\'entreprise', compteCorrect: 'immeuble' },
                { id: 'rubrique9', nom: 'Garage et entrepôt', compteCorrect: 'immeuble' },
                { id: 'rubrique10', nom: 'Attestion de la banque : solde positif', compteCorrect: 'banquea' },
                { id: 'rubrique11', nom: 'Actions et obligations placées à la bourse', compteCorrect: 'titres' },
                { id: 'rubrique12', nom: 'Outils et équipements', compteCorrect: 'instruments-outillage' },
                { id: 'rubrique13', nom: 'Prêt bancaire pour machines', compteCorrect: 'dette-bancaire' },
                { id: 'rubrique14', nom: 'Inventaire du matériel destiné à la vente', compteCorrect: 'stock-marchandises' },
                { id: 'rubrique15', nom: 'Présentoirs et étagères', compteCorrect: 'mobilier' },
                { id: 'rubrique16', nom: 'Apport initial des propriétaires', compteCorrect: 'capital' },
                { id: 'rubrique17', nom: 'Imprimantes', compteCorrect: 'informatique' },
                { id: 'rubrique18', nom: 'Machines de production', compteCorrect: 'machine' },
                { id: 'rubrique19', nom: 'Avis de solde du compte postal', compteCorrect: 'poste' },
                { id: 'rubrique20', nom: 'Facture d\'électricité impayée', compteCorrect: 'autres-dettes' },
				{ id: 'rubrique21', nom: 'Camionettes de livraison', compteCorrect: 'vehicules' },
				{ id: 'rubrique22', nom: 'Voiture de fonction', compteCorrect: 'vehicules' },
				{ id: 'rubrique23', nom: 'Diverses factures déjà payées', compteCorrect: 'hors' },
				{ id: 'rubrique24', nom: 'Solde du compte courant : en faveur de la banque', compteCorrect: 'banque' }
            ];

            // Mélanger les rubriques
            function melangerRubriques(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            let rubriquesMelangees = melangerRubriques([...rubriques]);
            
            // Générer les rubriques et leurs listes déroulantes
            const rubriquesList = document.getElementById('rubriques-list');
            const counter = document.getElementById('counter');
            const resultContainer = document.getElementById('result-container');
            const resultText = document.getElementById('result-text');
            
            function updateCounter() {
                const selects = document.querySelectorAll('.association select');
                let rubriquesNonClassees = 0;
                
                selects.forEach(select => {
                    if (select.value === '') {
                        rubriquesNonClassees++;
                    }
                });
                
                counter.textContent = `${rubriquesNonClassees} rubrique(s) restante(s)`;
            }
            
            function createRubriqueElement(rubrique, index) {
                const association = document.createElement('div');
                association.className = 'association';
                association.id = `association-${rubrique.id}`;
                
                const rubriqueNumber = document.createElement('div');
                rubriqueNumber.className = 'rubrique-number';
                rubriqueNumber.textContent = `${index + 1}.`;
                
                const rubriqueEl = document.createElement('div');
                rubriqueEl.className = 'association-rubrique';
                rubriqueEl.textContent = rubrique.nom;
                
                const selectCompte = document.createElement('select');
                selectCompte.className = 'association-compte';
                selectCompte.dataset.rubriqueId = rubrique.id;
                
                // Option par défaut
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = 'Choisir un compte';
                defaultOption.disabled = true;
                defaultOption.selected = true;
                selectCompte.appendChild(defaultOption);
                
                // Options des comptes
                comptes.forEach(compte => {
                    const option = document.createElement('option');
                    option.value = compte.id;
                    option.textContent = compte.nom;
                    selectCompte.appendChild(option);
                });
                
                // Conteneur pour la correction (icône + réponse correcte)
                const correctionContainer = document.createElement('div');
                correctionContainer.className = 'correction-container';
                
                // Élément pour afficher l'icône de validation
                const validationIcon = document.createElement('span');
                validationIcon.className = 'validation-icon';
                validationIcon.id = `icon-${rubrique.id}`;
                
                // Élément pour afficher la bonne réponse
                const correctAnswer = document.createElement('div');
                correctAnswer.className = 'correct-answer';
                correctAnswer.id = `correct-${rubrique.id}`;
                
                correctionContainer.appendChild(validationIcon);
                correctionContainer.appendChild(correctAnswer);
                
                // Événement de changement de sélection
                selectCompte.addEventListener('change', function() {
                    // Vérifier si toutes les rubriques sont classées
                    verifierToutesRubriquesClassees();
                    updateCounter();
                });
                
                association.appendChild(rubriqueNumber);
                association.appendChild(rubriqueEl);
                association.appendChild(selectCompte);
                association.appendChild(correctionContainer);
                
                return association;
            }
            
            function afficherRubriques() {
                rubriquesList.innerHTML = '';
                rubriquesMelangees.forEach((rubrique, index) => {
                    rubriquesList.appendChild(createRubriqueElement(rubrique, index));
                });
                updateCounter();
                verifierToutesRubriquesClassees();
                resultContainer.style.display = 'none';
            }
            
            afficherRubriques();
            
            // Vérifier si toutes les rubriques sont classées
            function verifierToutesRubriquesClassees() {
                const selects = document.querySelectorAll('.association select');
                const submitBtn = document.getElementById('submit-btn');
                let toutesClassees = true;
                
                selects.forEach(select => {
                    if (select.value === '') {
                        toutesClassees = false;
                    }
                });
                
                submitBtn.disabled = !toutesClassees;
            }
            
            // Soumettre la solution
            document.getElementById('submit-btn').addEventListener('click', function() {
                let correctCount = 0;
                
                // Vérifier chaque association
                rubriques.forEach(rubrique => {
                    const association = document.getElementById(`association-${rubrique.id}`);
                    const selectCompte = association.querySelector('select');
                    const validationIcon = association.querySelector('.validation-icon');
                    const correctAnswer = association.querySelector('.correct-answer');
                    
                    // Réinitialiser les styles
                    selectCompte.classList.remove('correct', 'incorrect');
                    validationIcon.textContent = '';
                    validationIcon.classList.remove('correct-icon', 'incorrect-icon');
                    correctAnswer.textContent = '';
                    
                    // Trouver le nom du compte correct
                    const compteCorrect = comptes.find(c => c.id === rubrique.compteCorrect);
                    
                    if (selectCompte.value === rubrique.compteCorrect) {
                        selectCompte.classList.add('correct');
                        validationIcon.textContent = '✓';
                        validationIcon.classList.add('correct-icon');
                        correctCount++;
                    } else {
                        selectCompte.classList.add('incorrect');
                        validationIcon.textContent = '✗';
                        validationIcon.classList.add('incorrect-icon');
                        
                        // Afficher la bonne réponse
                        correctAnswer.textContent = compteCorrect.nom;
                    }
                });
                
                // Afficher le taux de réussite
                const successRate = Math.round((correctCount / rubriques.length) * 100);
                resultText.textContent = `Taux de réussite: ${successRate}% (${correctCount}/${rubriques.length} réponses correctes)`;
                resultContainer.style.display = 'block';
            });
            
            // Recommencer
            document.getElementById('reset-btn').addEventListener('click', function() {
                rubriquesMelangees = melangerRubriques([...rubriques]);
                afficherRubriques();
            });
            
            // Voir la solution
            document.getElementById('solution-btn').addEventListener('click', function() {
                // Appliquer la solution correcte
                rubriques.forEach(rubrique => {
                    const association = document.getElementById(`association-${rubrique.id}`);
                    const selectCompte = association.querySelector('select');
                    const validationIcon = association.querySelector('.validation-icon');
                    const correctAnswer = association.querySelector('.correct-answer');
                    
                    // Sélectionner l'option correcte
                    selectCompte.value = rubrique.compteCorrect;
                    selectCompte.classList.add('correct');
                    selectCompte.classList.remove('incorrect');
                    
                    // Afficher l'icône de validation
                    validationIcon.textContent = '✓';
                    validationIcon.classList.add('correct-icon');
                    
                    // Vider la correction
                    correctAnswer.textContent = '';
                });
                
                document.getElementById('submit-btn').disabled = false;
                updateCounter();
                
                // Afficher le taux de réussite (100%)
                resultText.textContent = `Taux de réussite: 100% (${rubriques.length}/${rubriques.length} réponses correctes)`;
                resultContainer.style.display = 'block';
            });
            
            // Bouton Quitter
            document.getElementById('quitter-btn').addEventListener('click', function() {
                if (confirm('Voulez-vous vraiment quitter ?')) {
                    window.close();
                }
            });
        });
		
		// Fonctions pour le pop-up théorique
		function showTheory() {
			document.getElementById('theoryModal').style.display = 'block';
		}

		function closeTheory() {
			document.getElementById('theoryModal').style.display = 'none';
		}

		// Fermer le pop-up si on clique en dehors
		window.onclick = function(event) {
			const modal = document.getElementById('theoryModal');
			if (event.target === modal) {
				closeTheory();
			}
		}		
    </script>
</body>
</html>